<!doctype html>
<html lang="it">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Orbita — versione ultra minima</title>
<style>
 body{font-family:system-ui,Arial,sans-serif;margin:20px;max-width:900px}
 h1{font-size:20px}
 fieldset{border:1px solid #ccc;border-radius:8px;padding:10px}
 label{display:block;margin:.4rem 0 .1rem}
 input,select,button{padding:8px;font-size:14px}
 .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
 pre{white-space:pre-wrap;background:#f5f5f7;padding:10px;border-radius:8px}
</style>
<h1>Orbita — velocità & periodo (ultra)</h1>

<fieldset>
 <legend>Parametri</legend>
 <div class="row">
  <label>Preset
   <select id="preset" onchange="setPreset(this.value); compute();">
    <option value="casio">CASIO FX-750P (1984)</option>
    <option value="earth">Terra (moderni) + 5500 km</option>
   </select>
  </label>
  <label>Quota (km) <input id="alt_km" type="number" value="5500"></label>
  <label>Raggio corpo (km) <input id="r_km" type="number" value="6400"></label>
  <label>Massa M (kg) <input id="mass" type="text" value="6e24"></label>
  <label>G (m^3 kg^-1 s^-2) <input id="G" type="text" value="6.67e-11"></label>
  <label>Cifre decimali <input id="precision" type="number" value="3" min="0" max="12"></label>
 </div>
 <p><button id="calcBtn" onclick="compute()">Calcola</button></p>
</fieldset>

<h3>Risultati</h3>
<div id="out">—</div>
<details><summary>Dettagli</summary><pre id="work"></pre></details>

<script>
function num(v){return Number(String(v).trim().replace(',', '.'));}
function fmt(x,p){if(!isFinite(x)) return '—'; if(Math.abs(x)>=1e4||Math.abs(x)<1e-2) return x.toExponential(p); return x.toLocaleString(undefined,{maximumFractionDigits:p});}
function hms(sec){const s=Math.floor(sec%60);const m=Math.floor((sec/60)%60);const h=Math.floor(sec/3600);const frac=sec-Math.floor(sec);return `${h} h ${m} min ${(s+frac).toFixed(1)} s`;}

function setPreset(name){
 if(name==='casio'){ alt_km.value=5500; r_km.value=6400; mass.value='6e24'; G.value='6.67e-11'; }
 if(name==='earth'){ alt_km.value=5500; r_km.value=6371; mass.value='5.972e24'; G.value='6.67430e-11'; }
}

function compute(){
 const p=num(precision.value)||3;
 const Rkm=num(r_km.value), altkm=num(alt_km.value), M=num(mass.value), Gc=num(G.value);
 const r=(Rkm+(isFinite(altkm)?altkm:0))*1000, mu=Gc*M;
 const v=Math.sqrt(mu/r), T=2*Math.PI*r/v;
 out.innerHTML = `<div>raggio orbitale: <b>${fmt(r/1000,p)} km</b></div>
 <div>velocità: <b>${fmt(v,p)} m/s</b> (${fmt(v/1000,p)} km/s)</div>
 <div>periodo: <b>${fmt(T,p)} s</b> — ${hms(T)}</div>`;
 work.textContent = `μ=${mu.toExponential()}  r=${r.toExponential()} → v=${v.toExponential()}  T=${T.toExponential()}`;
}
setPreset('casio'); compute();
</script>
