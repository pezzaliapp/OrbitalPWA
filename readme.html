<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>OrbitalPWA â€” Documentazione (README)</title>
  <style>
    :root{--bg:#0b1b2b;--panel:#0f243a;--ink:#eaf2ff;--muted:#9fb6d1;--accent:#6fd3ff;--border:#24425f;}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif;line-height:1.6}
    header{position:sticky;top:0;background:var(--panel);border-bottom:1px solid var(--border);
           padding:12px;display:flex;gap:12px;align-items:center;z-index:10}
    header h1{margin:0;font-size:18px;color:#cfe6ff;flex:1}
    header a.button{background:var(--accent);color:#00243a;padding:10px 16px;border-radius:12px;font-weight:700;text-decoration:none;white-space:nowrap}
    main{max-width:1000px;margin:0 auto;padding:20px}
    h1,h2,h3,h4{color:#cfe6ff;line-height:1.25}
    p,li{color:#eaf2ff}
    code{background:#163452;padding:2px 4px;border-radius:4px;font-family:ui-monospace,Consolas,Menlo,monospace}
    pre{background:#081522;border:1px solid #20374e;padding:12px;border-radius:10px;overflow:auto}
    ul,ol{padding-left:22px}
    a{color:var(--accent)}
    hr{border:0;border-top:1px solid var(--border);margin:24px 0}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <h1>OrbitalPWA â€” Documentazione (README)</h1>
    <a href="https://www.alessandropezzali.it/OrbitalPWA/" class="button">ðŸš€ Avvia la App</a>
  </header>
  <main id="content">
    <p class="muted">Caricamento documentazioneâ€¦</p>
  </main>

  <script>
  // Lightweight Markdown renderer (single level lists, code fences, inline formatting)
  function escapeHtml(s){return s.replace(/[&<>"']/g,m=>({ "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;" }[m]));}
  function mdToHtml(md){
    const lines = md.replace(/\r\n/g,"\n").split("\n");
    let html=[], i=0, inCode=false, code=[];
    function flushCode(){ if(code.length){ html.push("<pre><code>"+escapeHtml(code.join("\n"))+"</code></pre>"); code=[]; } }
    function flushPara(buf){ if(buf.trim()){ html.push("<p>"+buf.trim()+"</p>"); } }
    while(i<lines.length){
      let L=lines[i];

      // Fenced code
      if(/^```/.test(L)){
        if(!inCode){ inCode=true; i++; continue; } else { inCode=false; flushCode(); i++; continue; }
      }
      if(inCode){ code.push(L); i++; continue; }

      // Headings
      let hm=L.match(/^(#{1,6})\s+(.*)$/);
      if(hm){ flushCode(); html.push("<h"+hm[1].length+">"+escapeHtml(hm[2])+"</h"+hm[1].length+">"); i++; continue; }

      // Horizontal rule
      if(/^\s*[-*_]{3,}\s*$/.test(L)){ html.push("<hr>"); i++; continue; }

      // Lists
      if(/^\s*[-+*]\s+/.test(L) || /^\s*\d+\.\s+/.test(L)){
        let isOrdered=/^\s*\d+\.\s+/.test(L); let arr=[];
        while(i<lines.length && (/^\s*[-+*]\s+/.test(lines[i]) || /^\s*\d+\.\s+/.test(lines[i]))){
          let x=lines[i];
          x = x.replace(/^\s*[-+*]\s+/, "");
          x = x.replace(/^\s*\d+\.\s+/, "");
          arr.push(x);
          i++;
        }
        const tag=isOrdered?"ol":"ul";
        html.push("<"+tag+">"); for(const it of arr){ html.push("<li>"+inline(it)+"</li>"); } html.push("</"+tag+">");
        continue;
      }

      // Blank line
      if(/^\s*$/.test(L)){ html.push(""); i++; continue; }

      // Paragraph
      html.push("<p>"+inline(L)+"</p>");
      i++;
    }

    function inline(s){
      s=escapeHtml(s);
      // code
      s=s.replace(/`([^`]+)`/g,(m,p1)=>"<code>"+p1+"</code>");
      // bold **text**
      s=s.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>");
      // italic *text*
      s=s.replace(/(^|[^*])\*([^*\n]+)\*/g,"$1<em>$2</em>");
      // links [text](url)
      s=s.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(m,t,u)=>'<a href="'+escapeHtml(u)+'" target="_blank" rel="noopener">'+escapeHtml(t)+'</a>');
      return s;
    }

    return html.join("\n");
  }

  async function loadReadme(){
    try{
      const r = await fetch('README.md', {cache:'no-cache'});
      const txt = await r.text();
      document.getElementById('content').innerHTML = mdToHtml(txt);
    }catch(e){
      document.getElementById('content').innerHTML = '<p>Impossibile caricare README.md</p>';
    }
  }
  loadReadme();
  </script>
</body>
</html>
